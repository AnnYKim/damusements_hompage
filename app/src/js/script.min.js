/* ////// Last Modified: '2018-07-25 18:52:30'////// */var sectionTop=[],$section=$(".has-menu"),currentScroll=0;$(function(){var e=$("#header"),t=e.find(".nav-menu"),o=0,i=function(e,t){var o=$("html, body");null==t?o.stop().animate({scrollTop:e},800):o.stop().animate({scrollTop:e},t)},n=function(){t.on("click",function(e){e.preventDefault();var n=t.index($(this));currentScroll<=980?sectionTop=[1960,4576,6282,7289,8169]:$section.each(function(e){sectionTop[e]=Math.ceil($(this).offset().top)});var s=sectionTop[n]-o;i(s)})},s=$(".damu-btn-more"),l=$(".damu-works-item"),a=$(".damu-works-item.hide");$(".damu-works-item.show"),$(".popup-damu .popup-silde-damu-wrapper"),$(".popup-damu .hidden-slide");s.on("click",function(){for(var e=0;e<3;e++)a.eq(e).removeClass("hide").addClass("show");a=$(".damu-works-item.hide"),p(3),a.length||s.addClass("disabled")});var p=function(e){var t=$(".additional-damu-popup"),o=e,i=(l.length,t.children(":lt("+o+")"));popupDamuSwiper.appendSlide(i),popupDamuSwiper.update()};$(".download-introduction").on("click",function(e){var t;e.preventDefault(),t="files/damusements_introduction.pdf",window.open("about:blank").location.href=t});var d=function(){o=Math.ceil(e.height()),n(),e.find(".header-logo").on("click",function(e){e.preventDefault(),i(0)}),p(6),setTimeout(function(){scroll(0,"noTransition"),$(".loading").fadeOut(1300)},300)};$(window).on("load",function(){d()}),$(window).scroll(function(){currentScroll=$(window).scrollTop()})}),$(function(){var e=$(".item-fade"),t=$(".item-line-label"),o=($(".damu-works"),null),i=null;new TimelineMax({paused:!0});$(window).on("load scroll",function(){o=$(window).scrollTop(),i=$(window).height(),e.each(function(e){var t=$(this).offset().top+$(this).outerHeight();o+i>t-150&&($(this).addClass("item-show"),$(".item-hide").addClass("item-show"))}),t.each(function(e){var t=$(this).offset().top+$(this).outerHeight();o+i>t-150&&$(this).find(".item-line").addClass("item-show")}),function(e){var t=$(e).offset().top,o=$(e).offset().top+$(e).outerHeight(),i=$(window).scrollTop()+window.innerHeight,n=$(window).scrollTop();if(i>t&&n<o)$(e).addClass("item-show")}(".item-fade-damu")})});var $wrap=$(".wrap"),$body=$("body"),$popup=$(".popup"),scrollBarWidth=function(){document.body.style.overflow="hidden";var e=document.body.clientWidth;return document.body.style.overflow="scroll",(e-=document.body.clientWidth)||(e=document.body.offsetWidth-document.body.clientWidth),document.body.style.overflow="",e},preventScroll=function(){$wrap.css({"padding-right":scrollBarWidth()}),$body.addClass("noScroll")},allowScroll=function(){$wrap.removeAttr("style"),$body.removeClass("noScroll")},openPopup=function(e){switch(e){case"damu":var t=$(".popup-damu");break;case"dsc":t=$(".popup-dsc");break;case"proz":t=$(".popup-proz")}preventScroll(),t.show(),t.children(".popup-dim").removeClass("hide"),_tl_animatePopup.play()},closePopup=function(){_tl_animatePopup.reverse(),setTimeout(function(){allowScroll(),$popup.hide()},400)},invisible=function(){$(".popup-dim").addClass("hide"),_tl_animatePopup.reverse()},_tl_animatePopup=new TimelineMax({paused:!0,onReverseComplete:invisible});_tl_animatePopup.add(TweenMax.from(".popup-dim",.2,{css:{opacity:0}}));var popupEvent=function(){var e=$(".popup"),t=e.find(".popup-area"),o=e.find(".popup-dim"),i=$(".popup-button-close"),n=$("a[data-link-popup]");i.on("click",function(e){e.preventDefault(),closePopup()}),o.on("click",function(e){e.preventDefault(),closePopup()}),n.on("click",function(e){e.preventDefault();var t=$(this).data("link-popup");openPopup(t)}),t.on("click",function(e){e.stopPropagation()}),$(".popup").hide()},dscPopupEvent=function(){};$(window).on("load",function(){popupEvent()});var visualSwiper=new Swiper(".visual-slide",{loop:!0,touchRatio:0,speed:800,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1}}),serviceSwiperDuration=8e3,serviceSwiper=new Swiper(".service-slide",{loop:!0,touchRatio:0,speed:800,navigation:{nextEl:".service-button-next",prevEl:".service-button-prev"},autoplay:{delay:serviceSwiperDuration,disableOnInteraction:!1,autoplayDisableOnInteraction:!1},autoplayDisableOnInteraction:!1,watchSlidesProgress:!0}),serviceSlideEvent=function(){$(".pagination-text.current");var e=$(".pagination-text.entire"),t=new TimelineMax;new TimelineMax;t.from(".service-slide-progress .line",8,{width:0,ease:Linear.easeNone},0).timeScale(1);var o=$(".service-slide-counter"),i=$('<span class="count">1<span/>');o.append(i),e.text(serviceSwiper.slides.length-2),serviceSwiper.on("slideChange",function(){var e,n;serviceSwiper.realIndex;e=serviceSwiper.realIndex+1,$(".service-slide").eq(e),n=$(".count"),(i=$('<span class="count next">'+e+"<span/>")).appendTo(o),TweenLite.to(n,.8,{y:-12,opacity:0,onCompleteParams:[n],onComplete:function(e){e.remove()},ease:Power2.easeOut}),TweenLite.fromTo(i,.8,{y:12,opacity:0},{y:0,opacity:1,ease:Power2.easeOut}),t.restart()})},aboutSlideEvent=function(){var e=$("button.about-story-button"),t=($(".about-slide"),0),o=$(".story-list-1"),i=$(".story-list-2"),n=$(".story-list-3"),s=$(".story-list-4"),l=$(".about-slide .logo"),a=$(".about-slide-line"),p=$(".story-text-list"),d={logo:["damu","dsc","proz"],list_1:{title:[],text:[]},list_2:{title:[],text:[]},list_3:{title:[],text:[]},list_4:{title:[],text:[]}},r=function(e){2==e?s.addClass("list-hide"):s.removeClass("list-hide"),l.removeClass("updated"),p.removeClass("updated"),a.find("span").removeClass(),o.find("strong").html(d.list_1.title[e]),o.find("p").html(d.list_1.text[e]),i.find("strong").html(d.list_2.title[e]),i.find("p").html(d.list_2.text[e]),n.find("strong").html(d.list_3.title[e]),n.find("p").html(d.list_3.text[e]),s.find("strong").html(d.list_4.title[e]),s.find("p").html(d.list_4.text[e]),setTimeout(function(){l.attr("data-logo",d.logo[e]).addClass("updated")},120),setTimeout(function(){a.find("span").addClass(d.logo[e])},320),setTimeout(function(){p.addClass("updated")},800)};o.each(function(e){d.list_1.title[e]=$(this).find("strong").html(),d.list_1.text[e]=$(this).find("p").html()}),i.each(function(e){d.list_2.title[e]=$(this).find("strong").html(),d.list_2.text[e]=$(this).find("p").html()}),n.each(function(e){d.list_3.title[e]=$(this).find("strong").html(),d.list_3.text[e]=$(this).find("p").html()}),s.each(function(e){d.list_4.title[e]=$(this).find("strong").html(),d.list_4.text[e]=$(this).find("p").html()}),r(t),e.on("click",function(){t<2?t++:t=0,r(t)})},popupDamuSwiper=new Swiper(".popup-slide-damu-container",{loop:!0,touchRatio:0,navigation:{nextEl:".popup-damu-button-next",prevEl:".popup-damu-button-prev"}}),popupDscSwiper=new Swiper(".popup-slide-dsc-container",{loop:!0,touchRatio:0,navigation:{nextEl:".popup-dsc-button-next",prevEl:".popup-dsc-button-prev"}}),dscWorksSwiper=new Swiper(".dsc-slide",{slidesPerView:"auto",spaceBetween:-80,centeredSlides:!0,speed:800,touchRatio:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function dscWorksSlideEvent(){var e=$(".popup-dsc .popup-button-close"),t=$(".popup-dsc .popup-dim"),o=$(".dsc-slide-item"),i=$(".dsc-slide-item").length,n=Math.ceil(i/2),s=!1,l=function(){o.eq(n).addClass("active")},a=function(){o.eq(n).nextAll().addClass("left")};dscWorksSwiper.slideTo(n,800),l(),a(),o.on("click",function(e){if(e.preventDefault(),!s){if(s=!0,(n=o.index($(this)))==dscWorksSwiper.realIndex)return popupDscSwiper.slideToLoop(n,0,openPopup("dsc")),s=!1,!1;o.removeClass("active left"),setTimeout(function(){dscWorksSwiper.slideTo(n,800,a())},450),setTimeout(function(){l(),s=!1},800)}}),e.add(t).on("click",function(){n!==popupDscSwiper.realIndex&&(n=popupDscSwiper.realIndex,$(".dsc-slide-item").removeClass("active left"),dscWorksSwiper.slideTo(n,800),l(),a())})}var damuPopupSlideEvent=function(){var e=$(".damu-works-item a");e.on("click",function(t){t.preventDefault();var o;o=e.index($(this)),popupDamuSwiper.slideToLoop(o,0)})};$(window).on("load",function(){aboutSlideEvent(),serviceSlideEvent(),dscWorksSlideEvent(),damuPopupSlideEvent()}),$(function(){$(window).on("load",function(){setTimeout(function(){var e,t,o,i;e=$(".visual-title"),t=[],o=e.find(".quote"),i=new TimelineMax({}),e.find("i").each(function(e){t[e]=$(this)}),i.staggerTo([t[0],t[1],t[2]],.6,{opacity:1,width:"100%"},.4).addLabel("listShow").to(o,.65,{opacity:1},"listShow+=0.3")},1e3)})}),$(function(){$(window).on("load scroll",function(){var e=$(this).scrollTop();$("#sub").css({opacity:e/980}),e<980&&$("#sub").removeClass("on"),e>980&&$("#sub").addClass("on"),e<911&&$("#header").removeClass("sticky"),e>911&&$("#header").addClass("sticky")})}),$(function(){var e=new ScrollMagic.Controller,t=new ScrollMagic.Scene({duration:980,offset:0}).setPin("#visual"),o=new ScrollMagic.Scene({duration:980,offset:0}).setPin("#main");e.addScene([t,o])});